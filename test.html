<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard | G&G Express</title>
  <link rel="stylesheet" href="./styles/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Jost:wght@400;500;600&family=Playfair+Display:ital,wght@0,700;1,600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/luxon@3.0.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.2.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
  <style>
    /* ===== Admin Specific Styles ===== */
    .admin-container {
      display: grid;
      grid-template-columns: 280px 1fr;
      min-height: 100vh;
      background: #f5f5f5;
    }

    .admin-sidebar {
      background: linear-gradient(135deg, var(--dark), #2a1a15);
      color: white;
      padding: 2rem 0;
      position: sticky;
      top: 0;
      height: 100vh;
      box-shadow: 4px 0 20px rgba(0,0,0,0.1);
      z-index: 100;
    }

    .admin-brand {
      padding: 0 1.5rem 1.5rem;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 1.5rem;
    }

    .admin-brand h2 {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
      color: var(--gold);
    }

    .admin-brand p {
      opacity: 0.8;
      font-size: 0.9rem;
    }

    .admin-nav {
      padding: 0 1rem;
    }

    .admin-nav-item {
      display: flex;
      align-items: center;
      padding: 0.8rem 1rem;
      margin-bottom: 0.5rem;
      border-radius: 8px;
      color: white;
      text-decoration: none;
      transition: all 0.3s;
    }

    .admin-nav-item i {
      margin-right: 0.8rem;
      width: 24px;
      text-align: center;
    }

    .admin-nav-item:hover, .admin-nav-item.active {
      background: rgba(255,255,255,0.1);
      color: var(--gold);
    }

    .admin-nav-item.active {
      background: linear-gradient(90deg, rgba(212,175,55,0.2), transparent);
      border-left: 3px solid var(--gold);
    }

    .admin-main {
      padding: 2rem;
      overflow-x: hidden;
    }

    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }

    .admin-header h1 {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      color: var(--dark);
      margin: 0;
    }

    .admin-user {
      display: flex;
      align-items: center;
    }

    .admin-user img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 0.8rem;
      object-fit: cover;
      border: 2px solid var(--gold);
    }

    .admin-user-info {
      display: flex;
      flex-direction: column;
    }

    .admin-user-name {
      font-weight: 600;
      color: var(--dark);
    }

    .admin-user-role {
      font-size: 0.8rem;
      color: var(--text-light);
    }

    .admin-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .admin-card {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      transition: all 0.3s;
      border-left: 4px solid var(--gold);
    }

    .admin-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }

    .admin-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .admin-card-title {
      font-weight: 600;
      color: var(--dark);
      font-size: 1.1rem;
    }

    .admin-card-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--primary);
      margin: 0.5rem 0;
    }

    .admin-card-change {
      display: flex;
      align-items: center;
      font-size: 0.9rem;
    }

    .admin-card-change.positive {
      color: #2e7d32;
    }

    .admin-card-change.negative {
      color: #c62828;
    }

    .admin-card-change i {
      margin-right: 0.3rem;
    }

    .admin-section {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }

    .admin-section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }

    .admin-section-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      color: var(--dark);
      margin: 0;
    }

    .admin-table {
      width: 100%;
      border-collapse: collapse;
    }

    .admin-table th {
      text-align: left;
      padding: 0.8rem 1rem;
      background: rgba(212,175,55,0.1);
      color: var(--dark);
      font-weight: 600;
    }

    .admin-table td {
      padding: 0.8rem 1rem;
      border-bottom: 1px solid rgba(0,0,0,0.05);
    }

    .admin-table tr:last-child td {
      border-bottom: none;
    }

    .admin-table tr:hover td {
      background: rgba(212,175,55,0.05);
    }

    .status-badge {
      display: inline-block;
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
    }

    .status-pending {
      background: #fff3e0;
      color: #e65100;
    }

    .status-processing {
      background: #e3f2fd;
      color: #1565c0;
    }

    .status-completed {
      background: #e8f5e9;
      color: #2e7d32;
    }

    .status-cancelled {
      background: #ffebee;
      color: #c62828;
    }

    .admin-btn {
      padding: 0.5rem 1rem;
      border-radius: 6px;
      border: none;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .admin-btn i {
      margin-right: 0.5rem;
    }

    .admin-btn-primary {
      background: var(--primary);
      color: white;
    }

    .admin-btn-primary:hover {
      background: var(--dark);
      transform: translateY(-2px);
    }

    .admin-btn-outline {
      background: transparent;
      border: 1px solid var(--primary);
      color: var(--primary);
    }

    .admin-btn-outline:hover {
      background: rgba(212,175,55,0.1);
    }

    .admin-btn-sm {
      padding: 0.3rem 0.7rem;
      font-size: 0.8rem;
    }

    .admin-chart-container {
      height: 300px;
      margin-top: 1.5rem;
      position: relative;
    }

    .admin-login {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: linear-gradient(135deg, var(--dark), #2a1a15);
      padding: 2rem;
    }

    .login-card {
      background: white;
      border-radius: 12px;
      padding: 2.5rem;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.2);
      text-align: center;
    }

    .login-card h1 {
      font-family: 'Playfair Display', serif;
      color: var(--dark);
      margin-bottom: 1.5rem;
    }

    .login-card p {
      color: var(--text-light);
      margin-bottom: 2rem;
    }

    .login-form-group {
      margin-bottom: 1.5rem;
      text-align: left;
    }

    .login-form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--dark);
    }

    .login-form-group input {
      width: 100%;
      padding: 0.8rem 1rem;
      border: 1px solid rgba(0,0,0,0.1);
      border-radius: 6px;
      font-size: 1rem;
      transition: all 0.3s;
    }

    .login-form-group input:focus {
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(212,175,55,0.2);
      outline: none;
    }

    .login-btn {
      width: 100%;
      padding: 0.8rem;
      background: linear-gradient(90deg, var(--gold), var(--primary));
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 1rem;
    }

    .login-btn:hover {
      background: linear-gradient(90deg, var(--primary), var(--gold));
      transform: translateY(-2px);
    }

    .admin-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }

    .admin-modal.active {
      opacity: 1;
      pointer-events: all;
    }

    .admin-modal-content {
      background: white;
      border-radius: 12px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      transform: translateY(20px);
      transition: transform 0.3s;
    }

    .admin-modal.active .admin-modal-content {
      transform: translateY(0);
    }

    .admin-modal-header {
      padding: 1.5rem;
      border-bottom: 1px solid rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .admin-modal-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem;
      color: var(--dark);
      margin: 0;
    }

    .admin-modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-light);
    }

    .admin-modal-body {
      padding: 1.5rem;
    }

    .admin-modal-footer {
      padding: 1.5rem;
      border-top: 1px solid rgba(0,0,0,0.1);
      display: flex;
      justify-content: flex-end;
      gap: 1rem;
    }

    .order-details-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
    }

    .order-details-group {
      margin-bottom: 1.5rem;
    }

    .order-details-label {
      font-weight: 600;
      color: var(--dark);
      margin-bottom: 0.5rem;
      display: block;
    }

    .order-details-value {
      padding: 0.8rem;
      background: rgba(0,0,0,0.03);
      border-radius: 6px;
    }

    .order-items-list {
      margin-top: 1rem;
    }

    .order-item {
      display: flex;
      justify-content: space-between;
      padding: 0.8rem 0;
      border-bottom: 1px solid rgba(0,0,0,0.05);
    }

    .order-item:last-child {
      border-bottom: none;
    }

    .order-item-name {
      font-weight: 500;
    }

    .order-item-price {
      color: var(--primary);
      font-weight: 600;
    }

    .order-total {
      display: flex;
      justify-content: space-between;
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid rgba(0,0,0,0.1);
      font-weight: 600;
      font-size: 1.1rem;
    }

    .admin-search {
      display: flex;
      margin-bottom: 1.5rem;
    }

    .admin-search input {
      flex: 1;
      padding: 0.8rem 1rem;
      border: 1px solid rgba(0,0,0,0.1);
      border-radius: 6px 0 0 6px;
      font-size: 1rem;
    }

    .admin-search button {
      padding: 0 1.5rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 0 6px 6px 0;
      cursor: pointer;
    }

    .admin-search button:hover {
      background: var(--dark);
    }

    .admin-pagination {
      display: flex;
      justify-content: center;
      margin-top: 1.5rem;
    }

    .admin-pagination button {
      padding: 0.5rem 0.8rem;
      margin: 0 0.3rem;
      background: white;
      border: 1px solid rgba(0,0,0,0.1);
      border-radius: 4px;
      cursor: pointer;
    }

    .admin-pagination button.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    .admin-pagination button:hover:not(.active) {
      background: rgba(0,0,0,0.05);
    }

    @media (max-width: 992px) {
      .admin-container {
        grid-template-columns: 1fr;
      }

      .admin-sidebar {
        height: auto;
        position: static;
      }

      .admin-main {
        padding: 1rem;
      }
    }

    @media (max-width: 768px) {
      .order-details-grid {
        grid-template-columns: 1fr;
      }

      .admin-table {
        display: block;
        overflow-x: auto;
      }
    }
  </style>
</head>
<body>
  <!-- Login Screen (shown by default) -->
  <div class="admin-login" id="loginScreen">
    <div class="login-card">
      <h1>Admin Dashboard</h1>
      <p>Sign in to access the G&G Express admin panel</p>
      
      <form id="loginForm">
        <div class="login-form-group">
          <label for="email">Email</label>
          <input type="email" id="email" placeholder="Enter your email" required>
        </div>
        
        <div class="login-form-group">
          <label for="password">Password</label>
          <input type="password" id="password" placeholder="Enter your password" required>
        </div>
        
        <button type="submit" class="login-btn">Sign In</button>
      </form>
    </div>
  </div>

  <!-- Admin Dashboard (hidden until login) -->
  <div class="admin-container" id="adminDashboard" style="display: none;">
    <!-- Sidebar -->
    <div class="admin-sidebar">
      <div class="admin-brand">
        <h2>G&G Express</h2>
        <p>Premium Kenyan Rice</p>
      </div>
      
      <nav class="admin-nav">
        <a href="#" class="admin-nav-item active" data-section="dashboard">
          <i class="fas fa-tachometer-alt"></i> Dashboard
        </a>
        <a href="#" class="admin-nav-item" data-section="orders">
          <i class="fas fa-shopping-bag"></i> Orders
        </a>
        <a href="#" class="admin-nav-item" data-section="inquiries">
          <i class="fas fa-envelope"></i> Inquiries
        </a>
        <a href="#" class="admin-nav-item" data-section="products">
          <i class="fas fa-box-open"></i> Products
        </a>
        <a href="#" class="admin-nav-item" data-section="settings">
          <i class="fas fa-cog"></i> Settings
        </a>
      </nav>
    </div>
    
    <!-- Main Content -->
    <div class="admin-main">
      <!-- Dashboard Header -->
      <div class="admin-header">
        <h1>Dashboard</h1>
        
        <div class="admin-user">
          <img src="https://ui-avatars.com/api/?name=Admin&background=1b3c13&color=fff" alt="Admin">
          <div class="admin-user-info">
            <span class="admin-user-name">Admin</span>
            <span class="admin-user-role">Super Admin</span>
          </div>
        </div>
      </div>
      
      <!-- Dashboard Content -->
      <div id="dashboardSection">
        <!-- Stats Cards -->
        <div class="admin-cards">
          <div class="admin-card">
            <div class="admin-card-header">
              <span class="admin-card-title">Total Revenue</span>
              <i class="fas fa-dollar-sign" style="color: var(--gold);"></i>
            </div>
            <div class="admin-card-value" id="totalRevenue">KSh 0</div>
            <div class="admin-card-change positive">
              <i class="fas fa-arrow-up"></i> <span id="revenueChange">0%</span> from last month
            </div>
          </div>
          
          <div class="admin-card">
            <div class="admin-card-header">
              <span class="admin-card-title">Total Orders</span>
              <i class="fas fa-shopping-bag" style="color: var(--gold);"></i>
            </div>
            <div class="admin-card-value" id="totalOrders">0</div>
            <div class="admin-card-change positive">
              <i class="fas fa-arrow-up"></i> <span id="ordersChange">0%</span> from last month
            </div>
          </div>
          
          <div class="admin-card">
            <div class="admin-card-header">
              <span class="admin-card-title">Pending Orders</span>
              <i class="fas fa-clock" style="color: var(--gold);"></i>
            </div>
            <div class="admin-card-value" id="pendingOrders">0</div>
            <div class="admin-card-change negative">
              <i class="fas fa-arrow-down"></i> <span id="pendingChange">0%</span> from last month
            </div>
          </div>
          
          <div class="admin-card">
            <div class="admin-card-header">
              <span class="admin-card-title">New Inquiries</span>
              <i class="fas fa-envelope" style="color: var(--gold);"></i>
            </div>
            <div class="admin-card-value" id="newInquiries">0</div>
            <div class="admin-card-change positive">
              <i class="fas fa-arrow-up"></i> <span id="inquiriesChange">0%</span> from last month
            </div>
          </div>
        </div>
        
        <!-- Revenue Chart -->
        <div class="admin-section">
          <div class="admin-section-header">
            <h2 class="admin-section-title">Revenue Overview</h2>
            <div>
              <select id="chartRange" class="admin-btn admin-btn-outline admin-btn-sm">
                <option value="7">Last 7 Days</option>
                <option value="30" selected>Last 30 Days</option>
                <option value="90">Last 90 Days</option>
                <option value="365">Last Year</option>
              </select>
            </div>
          </div>
          <div class="admin-chart-container">
            <canvas id="revenueChart"></canvas>
          </div>
        </div>
        
        <!-- Recent Orders -->
        <div class="admin-section">
          <div class="admin-section-header">
            <h2 class="admin-section-title">Recent Orders</h2>
            <a href="#" class="admin-btn admin-btn-outline admin-btn-sm" data-section="orders">View All</a>
          </div>
          <div class="table-responsive">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Order ID</th>
                  <th>Customer</th>
                  <th>Date</th>
                  <th>Amount</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="recentOrdersTable">
                <!-- Filled by JavaScript -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
      
      <!-- Orders Section (hidden by default) -->
      <div id="ordersSection" style="display: none;">
        <div class="admin-section-header">
          <h2 class="admin-section-title">Order Management</h2>
          <div class="admin-search">
            <input type="text" id="orderSearch" placeholder="Search orders...">
            <button type="button" id="searchOrdersBtn"><i class="fas fa-search"></i></button>
          </div>
        </div>
        
        <div class="table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Date</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="ordersTable">
              <!-- Filled by JavaScript -->
            </tbody>
          </table>
        </div>
        
        <div class="admin-pagination" id="ordersPagination">
          <!-- Filled by JavaScript -->
        </div>
      </div>
      
      <!-- Inquiries Section (hidden by default) -->
      <div id="inquiriesSection" style="display: none;">
        <div class="admin-section-header">
          <h2 class="admin-section-title">Customer Inquiries</h2>
          <div class="admin-search">
            <input type="text" id="inquirySearch" placeholder="Search inquiries...">
            <button type="button" id="searchInquiriesBtn"><i class="fas fa-search"></i></button>
          </div>
        </div>
        
        <div class="table-responsive">
          <table class="admin-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Subject</th>
                <th>Date</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="inquiriesTable">
              <!-- Filled by JavaScript -->
            </tbody>
          </table>
        </div>
        
        <div class="admin-pagination" id="inquiriesPagination">
          <!-- Filled by JavaScript -->
        </div>
      </div>
      
      <!-- Products Section (hidden by default) -->
      <div id="productsSection" style="display: none;">
        <div class="admin-section-header">
          <h2 class="admin-section-title">Product Management</h2>
          <button class="admin-btn admin-btn-primary" id="addProductBtn">
            <i class="fas fa-plus"></i> Add Product
          </button>
        </div>
        
        <div class="admin-cards">
          <div class="admin-card">
            <div class="admin-card-header">
              <span class="admin-card-title">Pishori Rice</span>
              <i class="fas fa-box" style="color: var(--gold);"></i>
            </div>
            <div class="admin-card-value">5 Packages</div>
            <div class="admin-card-change">
              <i class="fas fa-chart-line"></i> Best Seller
            </div>
          </div>
        </div>
        
        <div class="admin-section">
          <h3 class="admin-section-title">Product Packages</h3>
          <table class="admin-table">
            <thead>
              <tr>
                <th>Package</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1kg</td>
                <td>KSh 220</td>
                <td>In Stock</td>
                <td>
                  <button class="admin-btn admin-btn-outline admin-btn-sm">
                    <i class="fas fa-edit"></i> Edit
                  </button>
                </td>
              </tr>
              <tr>
                <td>2kg</td>
                <td>KSh 440</td>
                <td>In Stock</td>
                <td>
                  <button class="admin-btn admin-btn-outline admin-btn-sm">
                    <i class="fas fa-edit"></i> Edit
                  </button>
                </td>
              </tr>
              <tr>
                <td>5kg</td>
                <td>KSh 1100</td>
                <td>In Stock</td>
                <td>
                  <button class="admin-btn admin-btn-outline admin-btn-sm">
                    <i class="fas fa-edit"></i> Edit
                  </button>
                </td>
              </tr>
              <tr>
                <td>10kg</td>
                <td>KSh 2200</td>
                <td>In Stock</td>
                <td>
                  <button class="admin-btn admin-btn-outline admin-btn-sm">
                    <i class="fas fa-edit"></i> Edit
                  </button>
                </td>
              </tr>
              <tr>
                <td>20kg</td>
                <td>KSh 4400</td>
                <td>In Stock</td>
                <td>
                  <button class="admin-btn admin-btn-outline admin-btn-sm">
                    <i class="fas fa-edit"></i> Edit
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Settings Section (hidden by default) -->
      <div id="settingsSection" style="display: none;">
        <div class="admin-section">
          <div class="admin-section-header">
            <h2 class="admin-section-title">Account Settings</h2>
          </div>
          
          <form id="settingsForm">
            <div class="login-form-group">
              <label for="currentPassword">Current Password</label>
              <input type="password" id="currentPassword" placeholder="Enter current password">
            </div>
            
            <div class="login-form-group">
              <label for="newPassword">New Password</label>
              <input type="password" id="newPassword" placeholder="Enter new password">
            </div>
            
            <div class="login-form-group">
              <label for="confirmPassword">Confirm New Password</label>
              <input type="password" id="confirmPassword" placeholder="Confirm new password">
            </div>
            
            <button type="submit" class="admin-btn admin-btn-primary">
              <i class="fas fa-save"></i> Save Changes
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Order Detail Modal -->
  <div class="admin-modal" id="orderModal">
    <div class="admin-modal-content">
      <div class="admin-modal-header">
        <h3 class="admin-modal-title">Order Details</h3>
        <button class="admin-modal-close" id="closeOrderModal">&times;</button>
      </div>
      
      <div class="admin-modal-body" id="orderModalBody">
        <!-- Filled by JavaScript -->
      </div>
      
      <div class="admin-modal-footer">
        <button class="admin-btn admin-btn-outline" id="closeOrderModalBtn">Close</button>
        <button class="admin-btn admin-btn-primary" id="updateOrderBtn">Update Status</button>
      </div>
    </div>
  </div>

  <!-- Inquiry Detail Modal -->
  <div class="admin-modal" id="inquiryModal">
    <div class="admin-modal-content">
      <div class="admin-modal-header">
        <h3 class="admin-modal-title">Inquiry Details</h3>
        <button class="admin-modal-close" id="closeInquiryModal">&times;</button>
      </div>
      
      <div class="admin-modal-body" id="inquiryModalBody">
        <!-- Filled by JavaScript -->
      </div>
      
      <div class="admin-modal-footer">
        <button class="admin-btn admin-btn-outline" id="closeInquiryModalBtn">Close</button>
        <button class="admin-btn admin-btn-primary" id="updateInquiryBtn">Update Status</button>
      </div>
    </div>
  </div>

  <script>
    // Google Sheets API URL from the contact.js file
    const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxxZNJfsyNCJnlry6TicD4cK8IKf6oyc7cRHYMivRbQgmHRN6CjJ7yxZMSVwQ3XhylZrg/exec";
    
    // Admin credentials
    const ADMIN_EMAIL = "gng.express001@gmail.com";
    const ADMIN_PASSWORD = "testmkuu!";
    
    // Global state
    let currentUser = null;
    let orders = [];
    let inquiries = [];
    let currentOrderPage = 1;
    let currentInquiryPage = 1;
    const itemsPerPage = 10;
    let revenueChart = null;
    
    // DOM Elements
    const loginScreen = document.getElementById('loginScreen');
    const adminDashboard = document.getElementById('adminDashboard');
    const loginForm = document.getElementById('loginForm');
    const settingsForm = document.getElementById('settingsForm');
    const navItems = document.querySelectorAll('.admin-nav-item');
    const sections = {
      dashboard: document.getElementById('dashboardSection'),
      orders: document.getElementById('ordersSection'),
      inquiries: document.getElementById('inquiriesSection'),
      products: document.getElementById('productsSection'),
      settings: document.getElementById('settingsSection')
    };
    
    // Initialize the admin dashboard
    document.addEventListener('DOMContentLoaded', function() {
      // Check if user is already logged in
      const savedUser = localStorage.getItem('adminUser');
      if (savedUser) {
        try {
          currentUser = JSON.parse(savedUser);
          showDashboard();
        } catch (e) {
          localStorage.removeItem('adminUser');
        }
      }
      
      // Login form submission
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        
        if (email === ADMIN_EMAIL && password === ADMIN_PASSWORD) {
          currentUser = { email, password };
          localStorage.setItem('adminUser', JSON.stringify(currentUser));
          showDashboard();
          fetchData();
        } else {
          alert('Invalid email or password');
        }
      });
      
      // Navigation
      navItems.forEach(item => {
        item.addEventListener('click', function(e) {
          e.preventDefault();
          const section = this.dataset.section;
          showSection(section);
        });
      });
      
      // Settings form submission
      settingsForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const currentPassword = document.getElementById('currentPassword').value;
        const newPassword = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        
        if (currentPassword !== ADMIN_PASSWORD) {
          alert('Current password is incorrect');
          return;
        }
        
        if (newPassword !== confirmPassword) {
          alert('New passwords do not match');
          return;
        }
        
        // In a real app, you would update the password in your backend
        alert('Password changed successfully!');
        ADMIN_PASSWORD = newPassword;
        currentUser.password = newPassword;
        localStorage.setItem('adminUser', JSON.stringify(currentUser));
        settingsForm.reset();
      });
      
      // Initialize chart range selector
      document.getElementById('chartRange').addEventListener('change', function() {
        updateRevenueChart(parseInt(this.value));
      });
      
      // Initialize modals
      document.getElementById('closeOrderModal').addEventListener('click', closeOrderModal);
      document.getElementById('closeOrderModalBtn').addEventListener('click', closeOrderModal);
      document.getElementById('closeInquiryModal').addEventListener('click', closeInquiryModal);
      document.getElementById('closeInquiryModalBtn').addEventListener('click', closeInquiryModal);
      
      // Search functionality
      document.getElementById('searchOrdersBtn').addEventListener('click', searchOrders);
      document.getElementById('searchInquiriesBtn').addEventListener('click', searchInquiries);
      
      // If already logged in, fetch data immediately
      if (currentUser) {
        fetchData();
      }
    });
    
    // Show dashboard after login
    function showDashboard() {
      loginScreen.style.display = 'none';
      adminDashboard.style.display = 'grid';
      showSection('dashboard');
    }
    
    // Show specific section
    function showSection(section) {
      // Hide all sections
      Object.values(sections).forEach(sec => {
        sec.style.display = 'none';
      });
      
      // Show selected section
      sections[section].style.display = 'block';
      
      // Update active nav item
      navItems.forEach(item => {
        item.classList.remove('active');
        if (item.dataset.section === section) {
          item.classList.add('active');
        }
      });
      
      // Update page title
      document.querySelector('.admin-header h1').textContent = section.charAt(0).toUpperCase() + section.slice(1);
      
      // Fetch data if needed
      if (section === 'orders' && orders.length === 0) {
        fetchOrders();
      } else if (section === 'inquiries' && inquiries.length === 0) {
        fetchInquiries();
      }
    }
    
    // Fetch all data from Google Sheets
    function fetchData() {
      fetchOrders();
      fetchInquiries();
    }
    
    // Fetch orders from Google Sheets
    function fetchOrders() {
      fetch(`${GOOGLE_SCRIPT_URL}?action=getOrders`)
        .then(response => response.json())
        .then(data => {
          if (data && data.length > 0) {
            orders = data.map(order => ({
              id: order['Order ID'] || `ORD-${Math.floor(Math.random() * 10000)}`,
              name: order['Full Name'] || 'Unknown',
              email: order['Email Address'] || '',
              phone: order['Phone Number'] || '',
              date: order['Timestamp'] || new Date().toISOString(),
              items: order['Order_Summary'] || '',
              total: order['Order_Total'] || 'KSh 0',
              status: order['Status'] || 'Pending',
              location: order['Preferred Delivery Location'] || '',
              note: order['Delivery Note'] || ''
            }));
            
            updateOrdersTable();
            updateDashboardStats();
          }
        })
        .catch(error => {
          console.error('Error fetching orders:', error);
          // Fallback to sample data if API fails
          orders = getSampleOrders();
          updateOrdersTable();
          updateDashboardStats();
        });
    }
    
    // Fetch inquiries from Google Sheets
    function fetchInquiries() {
      fetch(`${GOOGLE_SCRIPT_URL}?action=getInquiries`)
        .then(response => response.json())
        .then(data => {
          if (data && data.length > 0) {
            inquiries = data.map(inquiry => ({
              id: inquiry['ID'] || `INQ-${Math.floor(Math.random() * 10000)}`,
              name: inquiry['Full Name'] || 'Unknown',
              email: inquiry['Email Address'] || '',
              phone: inquiry['Phone Number'] || '',
              date: inquiry['Timestamp'] || new Date().toISOString(),
              subject: inquiry['Subject'] || 'General Inquiry',
              message: inquiry['Your Message'] || '',
              status: inquiry['Status'] || 'Pending'
            }));
            
            updateInquiriesTable();
            updateDashboardStats();
          }
        })
        .catch(error => {
          console.error('Error fetching inquiries:', error);
          // Fallback to sample data if API fails
          inquiries = getSampleInquiries();
          updateInquiriesTable();
          updateDashboardStats();
        });
    }
    
    // Update dashboard statistics
    function updateDashboardStats() {
      // Total revenue
      const totalRevenue = orders.reduce((sum, order) => {
        const amount = parseFloat(order.total.replace('KSh', '').trim()) || 0;
        return sum + amount;
      }, 0);
      
      document.getElementById('totalRevenue').textContent = `KSh ${totalRevenue.toLocaleString()}`;
      
      // Total orders
      document.getElementById('totalOrders').textContent = orders.length;
      
      // Pending orders
      const pendingOrders = orders.filter(order => order.status === 'Pending').length;
      document.getElementById('pendingOrders').textContent = pendingOrders;
      
      // New inquiries
      const newInquiries = inquiries.filter(inquiry => inquiry.status === 'Pending').length;
      document.getElementById('newInquiries').textContent = newInquiries;
      
      // Percentage changes (simplified for demo)
      document.getElementById('revenueChange').textContent = '12.5%';
      document.getElementById('ordersChange').textContent = '8.3%';
      document.getElementById('pendingChange').textContent = '5.2%';
      document.getElementById('inquiriesChange').textContent = '15.7%';
      
      // Update recent orders table
      updateRecentOrdersTable();
      
      // Initialize or update revenue chart
      if (!revenueChart) {
        initializeRevenueChart();
      } else {
        updateRevenueChart(30); // Default to last 30 days
      }
    }
    
    // Initialize revenue chart
    function initializeRevenueChart() {
      const ctx = document.getElementById('revenueChart').getContext('2d');
      
      revenueChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: [],
          datasets: [{
            label: 'Revenue (KSh)',
            data: [],
            backgroundColor: 'rgba(212, 175, 55, 0.2)',
            borderColor: 'rgba(212, 175, 55, 1)',
            borderWidth: 2,
            tension: 0.4,
            fill: true
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                    return `KSh ${context.raw.toLocaleString()}`;
                }
              }
            }
          },
          scales: {
            x: {
              grid: {
                display: false
              }
            },
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return `KSh ${value.toLocaleString()}`;
                }
              }
            }
          }
        }
      });
      
      updateRevenueChart(30); // Default to last 30 days
    }
    
    // Update revenue chart with data for specified days
    function updateRevenueChart(days) {
      // Generate sample data for the demo
      const labels = [];
      const data = [];
      const now = new Date();
      
      for (let i = days - 1; i >= 0; i--) {
        const date = new Date(now);
        date.setDate(date.getDate() - i);
        labels.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
        
        // Generate random revenue with a general upward trend
        const base = 5000 + (i * 200);
        const variation = Math.random() * 3000;
        data.push(Math.floor(base + variation));
      }
      
      // Update chart
      revenueChart.data.labels = labels;
      revenueChart.data.datasets[0].data = data;
      revenueChart.update();
    }
    
    // Update recent orders table (for dashboard)
    function updateRecentOrdersTable() {
      const tableBody = document.getElementById('recentOrdersTable');
      tableBody.innerHTML = '';
      
      // Show only the 5 most recent orders
      const recentOrders = [...orders].sort((a, b) => new Date(b.date) - new Date(a.date)).slice(0, 5);
      
      recentOrders.forEach(order => {
        const row = document.createElement('tr');
        
        // Format date
        const orderDate = new Date(order.date);
        const formattedDate = orderDate.toLocaleDateString('en-US', { 
          year: 'numeric', 
          month: 'short', 
          day: 'numeric' 
        });
        
        row.innerHTML = `
          <td>${order.id}</td>
          <td>${order.name}</td>
          <td>${formattedDate}</td>
          <td>${order.total}</td>
          <td><span class="status-badge status-${order.status.toLowerCase()}">${order.status}</span></td>
          <td>
            <button class="admin-btn admin-btn-outline admin-btn-sm view-order-btn" data-id="${order.id}">
              <i class="fas fa-eye"></i> View
            </button>
          </td>
        `;
        
        tableBody.appendChild(row);
      });
      
      // Add event listeners to view buttons
      document.querySelectorAll('.view-order-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const orderId = this.dataset.id;
          viewOrder(orderId);
        });
      });
    }
    
    // Update full orders table
    function updateOrdersTable() {
      const tableBody = document.getElementById('ordersTable');
      tableBody.innerHTML = '';
      
      // Pagination
      const startIndex = (currentOrderPage - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const paginatedOrders = orders.slice(startIndex, endIndex);
      
      paginatedOrders.forEach(order => {
        const row = document.createElement('tr');
        
        // Format date
        const orderDate = new Date(order.date);
        const formattedDate = orderDate.toLocaleDateString('en-US', { 
          year: 'numeric', 
          month: 'short', 
          day: 'numeric' 
        });
        
        row.innerHTML = `
          <td>${order.id}</td>
          <td>${order.name}</td>
          <td>${formattedDate}</td>
          <td>${order.total}</td>
          <td><span class="status-badge status-${order.status.toLowerCase()}">${order.status}</span></td>
          <td>
            <button class="admin-btn admin-btn-outline admin-btn-sm view-order-btn" data-id="${order.id}">
              <i class="fas fa-eye"></i> View
            </button>
          </td>
        `;
        
        tableBody.appendChild(row);
      });
      
      // Update pagination
      updateOrdersPagination();
      
      // Add event listeners to view buttons
      document.querySelectorAll('.view-order-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const orderId = this.dataset.id;
          viewOrder(orderId);
        });
      });
    }
    
    // Update orders pagination
    function updateOrdersPagination() {
      const pagination = document.getElementById('ordersPagination');
      pagination.innerHTML = '';
      
      const totalPages = Math.ceil(orders.length / itemsPerPage);
      
      // Previous button
      const prevButton = document.createElement('button');
      prevButton.innerHTML = '&laquo;';
      prevButton.disabled = currentOrderPage === 1;
      prevButton.addEventListener('click', () => {
        if (currentOrderPage > 1) {
          currentOrderPage--;
          updateOrdersTable();
        }
      });
      pagination.appendChild(prevButton);
      
      // Page buttons
      for (let i = 1; i <= totalPages; i++) {
        const pageButton = document.createElement('button');
        pageButton.textContent = i;
        pageButton.className = currentOrderPage === i ? 'active' : '';
        pageButton.addEventListener('click', () => {
          currentOrderPage = i;
          updateOrdersTable();
        });
        pagination.appendChild(pageButton);
      }
      
      // Next button
      const nextButton = document.createElement('button');
      nextButton.innerHTML = '&raquo;';
      nextButton.disabled = currentOrderPage === totalPages;
      nextButton.addEventListener('click', () => {
        if (currentOrderPage < totalPages) {
          currentOrderPage++;
          updateOrdersTable();
        }
      });
      pagination.appendChild(nextButton);
    }
    
    // Update inquiries table
    function updateInquiriesTable() {
      const tableBody = document.getElementById('inquiriesTable');
      tableBody.innerHTML = '';
      
      // Pagination
      const startIndex = (currentInquiryPage - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      const paginatedInquiries = inquiries.slice(startIndex, endIndex);
      
      paginatedInquiries.forEach(inquiry => {
        const row = document.createElement('tr');
        
        // Format date
        const inquiryDate = new Date(inquiry.date);
        const formattedDate = inquiryDate.toLocaleDateString('en-US', { 
          year: 'numeric', 
          month: 'short', 
          day: 'numeric' 
        });
        
        row.innerHTML = `
          <td>${inquiry.id}</td>
          <td>${inquiry.name}</td>
          <td>${inquiry.subject}</td>
          <td>${formattedDate}</td>
          <td><span class="status-badge status-${inquiry.status.toLowerCase()}">${inquiry.status}</span></td>
          <td>
            <button class="admin-btn admin-btn-outline admin-btn-sm view-inquiry-btn" data-id="${inquiry.id}">
              <i class="fas fa-eye"></i> View
            </button>
          </td>
        `;
        
        tableBody.appendChild(row);
      });
      
      // Update pagination
      updateInquiriesPagination();
      
      // Add event listeners to view buttons
      document.querySelectorAll('.view-inquiry-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const inquiryId = this.dataset.id;
          viewInquiry(inquiryId);
        });
      });
    }
    
    // Update inquiries pagination
    function updateInquiriesPagination() {
      const pagination = document.getElementById('inquiriesPagination');
      pagination.innerHTML = '';
      
      const totalPages = Math.ceil(inquiries.length / itemsPerPage);
      
      // Previous button
      const prevButton = document.createElement('button');
      prevButton.innerHTML = '&laquo;';
      prevButton.disabled = currentInquiryPage === 1;
      prevButton.addEventListener('click', () => {
        if (currentInquiryPage > 1) {
          currentInquiryPage--;
          updateInquiriesTable();
        }
      });
      pagination.appendChild(prevButton);
      
      // Page buttons
      for (let i = 1; i <= totalPages; i++) {
        const pageButton = document.createElement('button');
        pageButton.textContent = i;
        pageButton.className = currentInquiryPage === i ? 'active' : '';
        pageButton.addEventListener('click', () => {
          currentInquiryPage = i;
          updateInquiriesTable();
        });
        pagination.appendChild(pageButton);
      }
      
      // Next button
      const nextButton = document.createElement('button');
      nextButton.innerHTML = '&raquo;';
      nextButton.disabled = currentInquiryPage === totalPages;
      nextButton.addEventListener('click', () => {
        if (currentInquiryPage < totalPages) {
          currentInquiryPage++;
          updateInquiriesTable();
        }
      });
      pagination.appendChild(nextButton);
    }
    
    // View order details
    function viewOrder(orderId) {
      const order = orders.find(o => o.id === orderId);
      if (!order) return;
      
      const modalBody = document.getElementById('orderModalBody');
      
      // Format date
      const orderDate = new Date(order.date);
      const formattedDate = orderDate.toLocaleDateString('en-US', { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
      
      // Parse order items (assuming format from the form)
      let itemsHtml = '';
      if (order.items) {
        const itemLines = order.items.split('\n');
        itemLines.forEach(line => {
          if (line.trim()) {
            itemsHtml += `<div class="order-item">
              <span class="order-item-name">${line.split('(')[0]}</span>
              <span class="order-item-price">${line.split('(')[1]?.replace(')', '') || ''}</span>
            </div>`;
          }
        });
      }
      
      modalBody.innerHTML = `
        <div class="order-details-grid">
          <div>
            <div class="order-details-group">
              <label class="order-details-label">Order Information</label>
              <div class="order-details-value">
                <p><strong>Order ID:</strong> ${order.id}</p>
                <p><strong>Date:</strong> ${formattedDate}</p>
                <p><strong>Status:</strong> <span class="status-badge status-${order.status.toLowerCase()}">${order.status}</span></p>
              </div>
            </div>
            
            <div class="order-details-group">
              <label class="order-details-label">Customer Information</label>
              <div class="order-details-value">
                <p><strong>Name:</strong> ${order.name}</p>
                <p><strong>Email:</strong> ${order.email || 'N/A'}</p>
                <p><strong>Phone:</strong> ${order.phone || 'N/A'}</p>
              </div>
            </div>
          </div>
          
          <div>
            <div class="order-details-group">
              <label class="order-details-label">Delivery Information</label>
              <div class="order-details-value">
                <p><strong>Location:</strong> ${order.location || 'N/A'}</p>
                <p><strong>Note:</strong> ${order.note || 'N/A'}</p>
              </div>
            </div>
            
            <div class="order-details-group">
              <label class="order-details-label">Order Items</label>
              <div class="order-details-value">
                <div class="order-items-list">
                  ${itemsHtml || '<p>No items details available</p>'}
                </div>
                <div class="order-total">
                  <span>Total:</span>
                  <span>${order.total || 'KSh 0'}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="order-details-group">
          <label class="order-details-label">Update Status</label>
          <select id="orderStatus" class="admin-btn admin-btn-outline" style="width: 100%; padding: 0.8rem;">
            <option value="Pending" ${order.status === 'Pending' ? 'selected' : ''}>Pending</option>
            <option value="Processing" ${order.status === 'Processing' ? 'selected' : ''}>Processing</option>
            <option value="Completed" ${order.status === 'Completed' ? 'selected' : ''}>Completed</option>
            <option value="Cancelled" ${order.status === 'Cancelled' ? 'selected' : ''}>Cancelled</option>
          </select>
        </div>
      `;
      
      // Show modal
      document.getElementById('orderModal').classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Set up update button
      document.getElementById('updateOrderBtn').onclick = function() {
        const newStatus = document.getElementById('orderStatus').value;
        updateOrderStatus(orderId, newStatus);
      };
    }
    
    // View inquiry details
    function viewInquiry(inquiryId) {
      const inquiry = inquiries.find(i => i.id === inquiryId);
      if (!inquiry) return;
      
      const modalBody = document.getElementById('inquiryModalBody');
      
      // Format date
      const inquiryDate = new Date(inquiry.date);
      const formattedDate = inquiryDate.toLocaleDateString('en-US', { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
      
      modalBody.innerHTML = `
        <div class="order-details-grid">
          <div>
            <div class="order-details-group">
              <label class="order-details-label">Inquiry Information</label>
              <div class="order-details-value">
                <p><strong>Inquiry ID:</strong> ${inquiry.id}</p>
                <p><strong>Date:</strong> ${formattedDate}</p>
                <p><strong>Status:</strong> <span class="status-badge status-${inquiry.status.toLowerCase()}">${inquiry.status}</span></p>
                <p><strong>Subject:</strong> ${inquiry.subject}</p>
              </div>
            </div>
          </div>
          
          <div>
            <div class="order-details-group">
              <label class="order-details-label">Customer Information</label>
              <div class="order-details-value">
                <p><strong>Name:</strong> ${inquiry.name}</p>
                <p><strong>Email:</strong> ${inquiry.email || 'N/A'}</p>
                <p><strong>Phone:</strong> ${inquiry.phone || 'N/A'}</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="order-details-group">
          <label class="order-details-label">Message</label>
          <div class="order-details-value" style="white-space: pre-line;">${inquiry.message || 'No message provided'}</div>
        </div>
        
        <div class="order-details-group">
          <label class="order-details-label">Update Status</label>
          <select id="inquiryStatus" class="admin-btn admin-btn-outline" style="width: 100%; padding: 0.8rem;">
            <option value="Pending" ${inquiry.status === 'Pending' ? 'selected' : ''}>Pending</option>
            <option value="Processing" ${inquiry.status === 'Processing' ? 'selected' : ''}>Processing</option>
            <option value="Resolved" ${inquiry.status === 'Resolved' ? 'selected' : ''}>Resolved</option>
          </select>
        </div>
      `;
      
      // Show modal
      document.getElementById('inquiryModal').classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Set up update button
      document.getElementById('updateInquiryBtn').onclick = function() {
        const newStatus = document.getElementById('inquiryStatus').value;
        updateInquiryStatus(inquiryId, newStatus);
      };
    }
    
    // Close order modal
    function closeOrderModal() {
      document.getElementById('orderModal').classList.remove('active');
      document.body.style.overflow = '';
    }
    
    // Close inquiry modal
    function closeInquiryModal() {
      document.getElementById('inquiryModal').classList.remove('active');
      document.body.style.overflow = '';
    }
    
    // Update order status
    function updateOrderStatus(orderId, newStatus) {
      // In a real app, you would send this to your backend
      const orderIndex = orders.findIndex(o => o.id === orderId);
      if (orderIndex !== -1) {
        orders[orderIndex].status = newStatus;
        
        // Update the table
        updateOrdersTable();
        updateRecentOrdersTable();
        updateDashboardStats();
        
        // Close modal
        closeOrderModal();
        
        // Show success message
        alert(`Order status updated to ${newStatus}`);
      }
    }
    
    // Update inquiry status
    function updateInquiryStatus(inquiryId, newStatus) {
      // In a real app, you would send this to your backend
      const inquiryIndex = inquiries.findIndex(i => i.id === inquiryId);
      if (inquiryIndex !== -1) {
        inquiries[inquiryIndex].status = newStatus;
        
        // Update the table
        updateInquiriesTable();
        updateDashboardStats();
        
        // Close modal
        closeInquiryModal();
        
        // Show success message
        alert(`Inquiry status updated to ${newStatus}`);
      }
    }
    
    // Search orders
    function searchOrders() {
      const query = document.getElementById('orderSearch').value.toLowerCase();
      
      if (!query) {
        updateOrdersTable();
        return;
      }
      
      const filteredOrders = orders.filter(order => 
        order.id.toLowerCase().includes(query) || 
        order.name.toLowerCase().includes(query) ||
        order.email.toLowerCase().includes(query) ||
        order.phone.toLowerCase().includes(query) ||
        order.status.toLowerCase().includes(query)
      );
      
      const tableBody = document.getElementById('ordersTable');
      tableBody.innerHTML = '';
      
      filteredOrders.forEach(order => {
        const row = document.createElement('tr');
        
        // Format date
        const orderDate = new Date(order.date);
        const formattedDate = orderDate.toLocaleDateString('en-US', { 
          year: 'numeric', 
          month: 'short', 
          day: 'numeric' 
        });
        
        row.innerHTML = `
          <td>${order.id}</td>
          <td>${order.name}</td>
          <td>${formattedDate}</td>
          <td>${order.total}</td>
          <td><span class="status-badge status-${order.status.toLowerCase()}">${order.status}</span></td>
          <td>
            <button class="admin-btn admin-btn-outline admin-btn-sm view-order-btn" data-id="${order.id}">
              <i class="fas fa-eye"></i> View
            </button>
          </td>
        `;
        
        tableBody.appendChild(row);
      });
      
      // Add event listeners to view buttons
      document.querySelectorAll('.view-order-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const orderId = this.dataset.id;
          viewOrder(orderId);
        });
      });
    }
    
    // Search inquiries
    function searchInquiries() {
      const query = document.getElementById('inquirySearch').value.toLowerCase();
      
      if (!query) {
        updateInquiriesTable();
        return;
      }
      
      const filteredInquiries = inquiries.filter(inquiry => 
        inquiry.id.toLowerCase().includes(query) || 
        inquiry.name.toLowerCase().includes(query) ||
        inquiry.email.toLowerCase().includes(query) ||
        inquiry.phone.toLowerCase().includes(query) ||
        inquiry.subject.toLowerCase().includes(query) ||
        inquiry.status.toLowerCase().includes(query)
      );
      
      const tableBody = document.getElementById('inquiriesTable');
      tableBody.innerHTML = '';
      
      filteredInquiries.forEach(inquiry => {
        const row = document.createElement('tr');
        
        // Format date
        const inquiryDate = new Date(inquiry.date);
        const formattedDate = inquiryDate.toLocaleDateString('en-US', { 
          year: 'numeric', 
          month: 'short', 
          day: 'numeric' 
        });
        
        row.innerHTML = `
          <td>${inquiry.id}</td>
          <td>${inquiry.name}</td>
          <td>${inquiry.subject}</td>
          <td>${formattedDate}</td>
          <td><span class="status-badge status-${inquiry.status.toLowerCase()}">${inquiry.status}</span></td>
          <td>
            <button class="admin-btn admin-btn-outline admin-btn-sm view-inquiry-btn" data-id="${inquiry.id}">
              <i class="fas fa-eye"></i> View
            </button>
          </td>
        `;
        
        tableBody.appendChild(row);
      });
      
      // Add event listeners to view buttons
      document.querySelectorAll('.view-inquiry-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const inquiryId = this.dataset.id;
          viewInquiry(inquiryId);
        });
      });
    }
    
    // Sample data for demo purposes
    function getSampleOrders() {
      return [
        {
          id: 'ORD-1001',
          name: 'John Mwangi',
          email: 'john@example.com',
          phone: '+254712345678',
          date: '2023-05-15T10:30:00',
          items: '2 × Pishori Rice (5kg) (KSh 1100)\n1 × Pishori Rice (10kg) (KSh 2200)',
          total: 'KSh 3300',
          status: 'Completed',
          location: 'Nairobi CBD, Koinange St',
          note: 'Call before delivery'
        },
        {
          id: 'ORD-1002',
          name: 'Sarah Wambui',
          email: 'sarah@example.com',
          phone: '+254723456789',
          date: '2023-05-16T14:45:00',
          items: '1 × Pishori Rice (20kg) (KSh 4400)',
          total: 'KSh 4400',
          status: 'Processing',
          location: 'Westlands, ABC Building',
          note: ''
        },
        {
          id: 'ORD-1003',
          name: 'David Ochieng',
          email: 'david@example.com',
          phone: '+254734567890',
          date: '2023-05-17T09:15:00',
          items: '3 × Pishori Rice (2kg) (KSh 440)\n2 × Pishori Rice (5kg) (KSh 1100)',
          total: 'KSh 1540',
          status: 'Pending',
          location: 'Karen, Hardy Gardens',
          note: 'Leave at gate'
        },
        {
          id: 'ORD-1004',
          name: 'Grace Atieno',
          email: 'grace@example.com',
          phone: '+254745678901',
          date: '2023-05-18T16:20:00',
          items: '1 × Pishori Rice (50kg) (KSh 11000)',
          total: 'KSh 11000',
          status: 'Completed',
          location: 'Kilimani, XYZ Apartments',
          note: 'Bulk order for restaurant'
        },
        {
          id: 'ORD-1005',
          name: 'Peter Kamau',
          email: 'peter@example.com',
          phone: '+254756789012',
          date: '2023-05-19T11:30:00',
          items: '1 × Pishori Rice (1kg) (KSh 220)\n1 × Pishori Rice (2kg) (KSh 440)',
          total: 'KSh 660',
          status: 'Cancelled',
          location: 'Thika, Greenpark Estate',
          note: 'Customer requested cancellation'
        }
      ];
    }
    
    function getSampleInquiries() {
      return [
        {
          id: 'INQ-2001',
          name: 'James Mutua',
          email: 'james@example.com',
          phone: '+254767890123',
          date: '2023-05-14T08:45:00',
          subject: 'Bulk Order Request',
          message: 'Hello, I would like to inquire about bulk pricing for orders over 200kg. Do you offer additional discounts for such quantities?',
          status: 'Pending'
        },
        {
          id: 'INQ-2002',
          name: 'Mary Njeri',
          email: 'mary@example.com',
          phone: '+254778901234',
          date: '2023-05-15T13:20:00',
          subject: 'Delivery Question',
          message: 'Do you deliver to Mombasa? If so, what are the delivery charges and estimated time?',
          status: 'Processing'
        },
        {
          id: 'INQ-2003',
          name: 'Robert Omollo',
          email: 'robert@example.com',
          phone: '+254789012345',
          date: '2023-05-16T17:30:00',
          subject: 'Product Quality',
          message: 'I received my order yesterday and noticed some broken grains. Is this normal for your premium rice?',
          status: 'Resolved'
        },
        {
          id: 'INQ-2004',
          name: 'Eunice Achieng',
          email: 'eunice@example.com',
          phone: '+254790123456',
          date: '2023-05-17T10:15:00',
          subject: 'Order Inquiry',
          message: 'I placed an order but haven\'t received confirmation. Can you check if it went through? Order ID: ORD-1006',
          status: 'Pending'
        },
        {
          id: 'INQ-2005',
          name: 'Daniel Kiprop',
          email: 'daniel@example.com',
          phone: '+254701234567',
          date: '2023-05-18T15:40:00',
          subject: 'Farm Visit',
          message: 'I\'m a journalist writing about Kenyan agriculture. Is it possible to visit your farms in Mwea?',
          status: 'Processing'
        }
      ];
    }
  </script>
</body>
</html>